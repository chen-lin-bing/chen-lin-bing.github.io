<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>frp内网穿透</title>
      <link href="/2020/02/14/frp-nei-wang-chuan-tou/"/>
      <url>/2020/02/14/frp-nei-wang-chuan-tou/</url>
      
        <content type="html"><![CDATA[<h1 id="FRP内网穿透"><a href="#FRP内网穿透" class="headerlink" title="FRP内网穿透"></a>FRP内网穿透</h1><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>把搭建在家里树莓派内网网站暴露到公网上，可以随时随地的访问网站。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>拥有公网IP的服务器</li><li>树莓派</li></ul><p>##下载配置服务端frps</p><p>frp在git上的下载地址 <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">https://github.com/fatedier/frp/releases</a></p><p>根据操作系统和架构下载对应版本的frp，例如在服务端用的是amd64的Liunx，而树莓派是arm的Linux</p><pre class=" language-shell"><code class="language-shell">uanme -a #查看系统信息wget https://github.com/fatedier/frp/releases/download/v0.31.2/frp_0.31.2_linux_amd64.tar.gz #服务端下载压缩包tar -zxvf frp_0.31.2_linux_amd64.tar.gz #解压缩</code></pre><p>在服务端需要配置frps.ini文件，具体可以参考git文档，以下给出的是我的简单的配置</p><pre class=" language-shell"><code class="language-shell">[common]token =  #客户端连接令牌,自己填写，需要和客户端的保持一致bind_port = 7000 dashboard_port = 7500 #控制台的端口dashboard_user =  #控制台的登陆账户，自己填写dashboard_pwd =  #控制台的密码，自己填写tcp_mux = truemax_pool_count = 20 # 穿透服务允许的连接数max_ports_per_client = 0 # 单个客户端允许建立的穿透服务，0为不限制</code></pre><pre class=" language-shell"><code class="language-shell">./frpc -c ./frc.ini #配置完成后，在当前的工作目录下执行启动服务</code></pre><p>访问公网下的ip的7500端口可以进入控制台</p><p><img src="/images/image-20200214144720250.png" alt=""></p><p>将frps加入服务管理 ，在/usr/lib/systemd/system/目录下新建frps.service文件</p><pre class=" language-shell"><code class="language-shell">[Unit]Description=frps serviceAfter=network.target syslog.targetWants=network.target[Service]Type=simple#启动服务的命令（此处写你的frps的实际安装目录ExecStart=/usr/local/frp/frps -c /usr/local/frp/frps.ini[Install]WantedBy=multi-user.target</code></pre><p>将frp服务设置为开机自启动</p><pre class=" language-shell"><code class="language-shell">systemctl enable frps #开机自启动systemctl start frps #启动frp</code></pre><h2 id="下载配置客户端frpc"><a href="#下载配置客户端frpc" class="headerlink" title="下载配置客户端frpc"></a>下载配置客户端frpc</h2><p>获取对应架构的frp客户端，我这里用的是树莓派所采用的是arm版的</p><pre class=" language-shell"><code class="language-shell">wget https://github.com/fatedier/frp/releases/download/v0.31.2/frp_0.31.2_linux_arm.tar.gztar -zxvf frp_0.31.2_linux_arm.tar.gz #解压缩</code></pre><p>在客户端需要配置frps.ini文件，我这里只需要将一个网站公开，可以按照自己的需求进行配置</p><pre class=" language-shell"><code class="language-shell">[common]server_addr =  #服务器地址,可以是域名，也可使ip地址server_port = 7000token = #需要以服务端保持一致[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22 #本地端口remote_port = 8008 #远程ssh端口[pi]type = tcplocal_ip = 127.0.0.1local_port = 80 #本地端口remote_port = 8080 #远程网页访问端口</code></pre><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><pre class=" language-shell"><code class="language-shell">ssh -p服务端远程端口 客户端的Lunix登入账户@服务器地址#之后的密码输入客户端的登陆密码#IP地址:8080 直接访问树莓派上的网址</code></pre>]]></content>
      
      
      <categories>
          
          <category> frp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frp </tag>
            
            <tag> 内网穿透 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
